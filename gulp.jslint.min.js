/**
 * gulp.jslint.js
 * Copyright (C) 2014 KarimSa Networks.
 **/
!function(global){"use strict";var fs=require("fs"),path=require("path"),evtStr=require("event-stream"),initLint=function(fn){var lintPath=path.resolve(__dirname,"./node_modules/JSLint/jslint.js");fs.readFile(lintPath,"utf8",function(err,jslintjs){err?fn(err):(eval(jslintjs+"; global.JSLINT = JSLINT; "),fn(null))})},doLint=function(r){return function(t,n){var e,l,i,o,a=function(e){var a;if(e||!global.JSLINT)a=n(e||"jslint: failed to load JSLINT.");else if(l=t.contents.toString("utf8"),global.JSLINT(l,r))a=n(null,t);else{for(i="jslint: failed to lint: "+t.path.replace(path.resolve(__dirname)+"/","")+".",o=0;o<global.JSLINT.errors.length;o+=1)global.JSLINT.errors[o]&&(i+="\njslint: "+global.JSLINT.errors[o].line+": "+global.JSLINT.errors[o].character+": "+global.JSLINT.errors[o].reason);a=n(new Error(i))}return a};return t.isStream()?void(e=n(new Error("jslint: bad file input."))):(t.isNull()||(e=global.JSLINT?a(null):initLint(a)),e)}};module.exports=function(r){return evtStr.map(doLint(r||{}))}}(this);